
-- COMANDO DE CRIAÇÃO DAS TABELAS DE LEGENDA
execute MG3ELegendUtils.CreateTables('G3E_LEGAER_DEFAULT', 'G3E_LEGAER_DEFDSP', 'G3E_LEGAER_DEFAU', 'G3E_LAER_DEF');
commit;

-- COPIA DOS VALORES DA LEGGEO
INSERT INTO G3E_LEGAER_DEFAULT (SELECT * FROM G3E_LEGGEO_DEFAULT);
INSERT INTO G3E_LEGAER_DEFDSP (SELECT g3e_dcrowno, g3e_legenditem, g3e_username, g3e_level, g3e_ordinal, g3e_leafindicator, g3e_role, g3e_localecomment, SYSDATE  FROM G3E_LEGGEO_DEFDSP);

-- CRIAÇÃO DOS FILTROS
update g3e_legaer_default set g3e_filter = 'LOCAL_INSTALACAO=''Aérea''' where g3e_leno in (1182001,1183001,1183201);
COMMIT;
update g3e_legaer_default set g3e_filter = 'PLACEMENT=''AER''' where g3e_leno in (724401,722001,724601,723001,724201,721001,723201,723401);
COMMIT;
update g3e_legaer_default set g3e_filter = 'PLACEMENT=''AER''' where g3e_leno in (731001, 734401, 734201, 733201);
COMMIT;
update g3e_legaer_default set g3e_filter = 'LOCAL_INSTALACAO=''Aérea''' where g3e_leno in (1213001, 1212001);
COMMIT;

-- RENOMEANDO A LEGENDA
UPDATE G3E_LEGENDSETTINGS SET G3E_USERNAME = 'Vista Aérea' where g3e_lsno = 7;
--UPDATE G3E_LEGENDSETTINGS_0016 SET G3E_USERNAME = 'Vista Aérea' where g3e_lsno = 7;

-- APAGANDO OS ELEMENTOS SUBTERRANEOS
DELETE FROM G3E_LEGAER_DEFDSP WHERE G3E_DCROWNO  in (115,116,117,118);
DELETE FROM G3E_LEGAER_DEFAULT WHERE G3E_LENO IN (SELECT G3E_LENO FROM G3E_LEGENDENTRY WHERE G3E_USERNAME IN (SELECT G3E_USERNAME FROM G3E_LEGGEO_DEFDSP where g3e_dcrowno in (115,116,117,118)));
COMMIT;

-- ATUALIZANDO A ESCALA
UPDATE G3E_LEGAER_DEFAU AER SET G3E_DISPLAYSCALEMAX = (SELECT G3E_DISPLAYSCALEMAX FROM G3E_LEGGEO_DEFAU GEO WHERE AER.G3E_LENO = GEO.G3E_LENO);
COMMIT;
